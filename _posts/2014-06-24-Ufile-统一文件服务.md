
## __Ufile__  统一文件服务约定

版本 : __0.0.1 alpha__  
时间 : __2014年6月__  
作者 : [__hgzp__](http://www.hgzp.com.cn)

---


#### 前言
---

整个服务分为两部分：

__Ufile__  API  服务

> API 查询文件信息，获取唯一性上传码 等 辅助性工作

__Ufile__  transfer 服务 

>文件上传和下载 ，主要使用 `http` 协议  
>文件服务器根据使用场景，有如下三种类型：  
>
>__主服务器__ : 1台主服务器，文件的读取以此服务器作为唯一地址，内部实现跳转，跳转到具体的读取服务器上。      
>__读取服务器__ : 根据文件 ID 分片 1-n台 服务器 ，存放具体的文件，并作为 __主服务器器__ 的跳转目的地。  
>__上传服务器__ : 1-n台 上传服务器，上传文件时可随机选取其中一台。   

__Ufile__ 文件唯一性id : __id\_ufile__

>每个文件上传成功后，都会获得一个唯一性的 ID ，系统也计划使用通用算法，可以脱机计算某文件的 ID ，达成使用的便利；此唯一性ID 将作为文件 API访问，内容获取，分片的唯一性依据 ， 使用 统一文件的第三方系统，在内部记录文件内容时，可仅仅记录此 id 。




#### 示例说明
---

假设 API 服务器在 

	http://api.hgzp.com.cn/ufile

文件传输的访问服务器，为了降低服务器的压力，和分片的要求，可能会在多个服务器上  

假设其中的 __主服务器器__ 如下：

	http://main.ufile.hgzp.com.cn

__读取服务器__ 如下，根据 文件 ID 分片 为 两台服务器：

	http://s2_1.ufile.hgzp.com.cn
	http://s2_2.ufile.hgzp.com.cn

__上传服务器__ 如下:

	http://up2_1.ufile.hgzp.com.cn
	http://up2_2.ufile.hgzp.com.cn

以上的服务由多台服务器提供，可能某些服务会由一台服务器混合提供（极端情况下由一台服务器提供）。
	
	








